---
layout: post
title:  "聊聊项目中不被执行的代码"
date:   2017-11-04 06:35:12 +0800
---
你正在参与一个有着成百上千文件的项目？假如在这个项目中存在着不被执行的代码，我想告诉你关于不被执行代码的事情和怎么处理它们。首先，我们先定义下什么是不被使用的代码。

### 不被执行的代码

不被执行的代码是指那些不可能被执行的代码。它们可能是在某些情况下创建的，但是从来没有被用到。

### 为什么这是个问题

因为这些代码对于项目是无感知的，即使你删除它们也不会影响程序的运行，为什么要存在。况且，如果不删除，可能会有一些问题：

* 新人将要读这些代码，并且去理解它们，甚至会去用它们。
* 浪费你的空间。
* 这些代码同样要被加载进 IDE，会更加消耗你的内存。

如果存在不被执行的代码，也许会碰到就像下图情形的事情

![](http://pic.zinaer.com/201711/dead_code.gif)

### JavaScript 这方面的问题

JavaScript 是一个非常活跃流行的语言，每天有大量的应用和插件被开发。比如，NPM 有超过 450000 个包，超过 1TB 的代码。假如一个包是 2MB，这其中有 25% 的代码是没有人用的代码。

你不使用 NodeJS？你是后端开发者？同样面临这个问题，比如你的项目需要紧急添加一批新的功能，你是没有时间去优化老代码的，更别说删除一些不被执行的代码。

### 解决问题的方案

如果你使用 Google 搜索，你会发现很多人使用 Google Closure 和 WebPack 来解决这个问题。但是，我认为这些工具没有更好解决问题。工具只是帮助你删除了不被执行的代码，但是它们并不会教会你哪些代码需要删除。

### 其它编程语言怎么解决

让我们看一些流行的编程语言

* Python - vulture
* C,C++,C#,TCL - coco
* Java - proguard

### 更好的解决 JavaScript 的问题

从 Chrome 59 开始，你可以使用开发者工具的 Coverage 功能来检查你的代码。

![](http://pic.zinaer.com/201711/coverage.png)




